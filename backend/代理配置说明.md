# AI 服务代理配置说明

## 问题描述

在学校网络环境下，访问 DeepSeek API (`https://api.deepseek.com`) 可能会被防火墙阻止，出现 "Authentication Fails (governor)" 错误。

## 解决方案

### 方案 1：使用代理服务器（推荐）

如果学校提供了代理服务器，可以通过配置代理来访问 DeepSeek API。

#### 配置步骤

1. **编辑 `.env` 文件**，添加代理配置：

```env
# AI API 密钥
DEEPSEEK_API_KEY=your_api_key_here

# 代理配置（选择一个）
HTTP_PROXY=http://proxy.example.com:8080
HTTPS_PROXY=http://proxy.example.com:8080

# 或者如果代理需要认证
HTTP_PROXY=http://username:password@proxy.example.com:8080
HTTPS_PROXY=http://username:password@proxy.example.com:8080
```

2. **重启后端服务**：

```bash
npm run dev
```

3. **查看日志**，确认代理已启用：

```
🌐 使用代理服务器: http://proxy.example.com:8080
```

### 方案 2：使用 VPN

如果学校网络允许使用 VPN，可以：

1. 连接到 VPN
2. 确保 VPN 可以访问 `https://api.deepseek.com`
3. 重启后端服务

### 方案 3：使用移动热点

如果学校网络限制较严格，可以：

1. 使用手机热点
2. 将电脑连接到手机热点
3. 重启后端服务

## 测试代理配置

配置代理后，可以通过以下方式测试：

1. **查看后端日志**：
   - 如果看到 "🌐 使用代理服务器: ..."，说明代理已配置
   - 如果 AI 请求成功，说明代理工作正常

2. **测试 AI 功能**：
   - 在前端发送 AI 分析请求
   - 如果成功返回结果，说明配置正确

## 常见问题

### Q: 如何获取学校代理地址？

A: 通常可以从以下途径获取：
- 学校 IT 部门
- 学校网络配置文档
- 浏览器代理设置（查看浏览器网络设置）

### Q: 代理格式是什么？

A: 代理 URL 格式：
- HTTP 代理：`http://proxy.example.com:8080`
- 需要认证：`http://username:password@proxy.example.com:8080`
- SOCKS5 代理：`socks5://proxy.example.com:1080`

### Q: 配置代理后仍然失败？

A: 可能的原因：
1. 代理地址或端口错误
2. 代理需要认证但未配置用户名密码
3. 代理本身也无法访问 DeepSeek API
4. 检查代理格式是否正确

## 注意事项

1. **安全性**：如果代理需要认证，请妥善保管 `.env` 文件，不要提交到 Git
2. **性能**：使用代理可能会影响 API 响应速度
3. **兼容性**：确保代理支持 HTTPS 连接

